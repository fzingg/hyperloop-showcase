<!DOCTYPE html><html><head><meta charset="utf-8"><style>body {
  width: 45em;
  border: 1px solid #ddd;
  outline: 1300px solid #fff;
  margin: 16px auto;
}

body .markdown-body
{
  padding: 30px;
}

@font-face {
  font-family: fontawesome-mini;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

@font-face {
  font-family: octicons-anchor;
  src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
}

.markdown-body {
  font-family: sans-serif;
  -ms-text-size-adjust: 100%;
  -webkit-text-size-adjust: 100%;
  color: #333333;
  overflow: hidden;
  font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif;
  font-size: 16px;
  line-height: 1.6;
  word-wrap: break-word;
}

.markdown-body a {
  background: transparent;
}

.markdown-body a:active,
.markdown-body a:hover {
  outline: 0;
}

.markdown-body b,
.markdown-body strong {
  font-weight: bold;
}

.markdown-body mark {
  background: #ff0;
  color: #000;
  font-style: italic;
  font-weight: bold;
}

.markdown-body sub,
.markdown-body sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}
.markdown-body sup {
  top: -0.5em;
}
.markdown-body sub {
  bottom: -0.25em;
}

.markdown-body h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

.markdown-body img {
  border: 0;
}

.markdown-body hr {
  -moz-box-sizing: content-box;
  box-sizing: content-box;
  height: 0;
}

.markdown-body pre {
  overflow: auto;
}

.markdown-body code,
.markdown-body kbd,
.markdown-body pre,
.markdown-body samp {
  font-family: monospace, monospace;
  font-size: 1em;
}

.markdown-body input {
  color: inherit;
  font: inherit;
  margin: 0;
}

.markdown-body html input[disabled] {
  cursor: default;
}

.markdown-body input {
  line-height: normal;
}

.markdown-body input[type="checkbox"] {
  box-sizing: border-box;
  padding: 0;
}

.markdown-body table {
  border-collapse: collapse;
  border-spacing: 0;
}

.markdown-body td,
.markdown-body th {
  padding: 0;
}

.markdown-body .codehilitetable {
  border: 0;
  border-spacing: 0;
}

.markdown-body .codehilitetable tr {
  border: 0;
}

.markdown-body .codehilitetable pre,
.markdown-body .codehilitetable div.codehilite {
  margin: 0;
}

.markdown-body .linenos,
.markdown-body .code,
.markdown-body .codehilitetable td {
  border: 0;
  padding: 0;
}

.markdown-body td:not(.linenos) .linenodiv {
  padding: 0 !important;
}

.markdown-body .code {
  width: 100%;
}

.markdown-body .linenos div pre,
.markdown-body .linenodiv pre,
.markdown-body .linenodiv {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-left-radius: 3px;
  -webkit-border-bottom-left-radius: 3px;
  -moz-border-radius-topleft: 3px;
  -moz-border-radius-bottomleft: 3px;
  border-top-left-radius: 3px;
  border-bottom-left-radius: 3px;
}

.markdown-body .code div pre,
.markdown-body .code div {
  border: 0;
  -webkit-border-radius: 0;
  -moz-border-radius: 0;
  border-radius: 0;
  -webkit-border-top-right-radius: 3px;
  -webkit-border-bottom-right-radius: 3px;
  -moz-border-radius-topright: 3px;
  -moz-border-radius-bottomright: 3px;
  border-top-right-radius: 3px;
  border-bottom-right-radius: 3px;
}

.markdown-body * {
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body input {
  font: 13px Helvetica, arial, freesans, clean, sans-serif, "Segoe UI Emoji", "Segoe UI Symbol";
  line-height: 1.4;
}

.markdown-body a {
  color: #4183c4;
  text-decoration: none;
}

.markdown-body a:hover,
.markdown-body a:focus,
.markdown-body a:active {
  text-decoration: underline;
}

.markdown-body hr {
  height: 0;
  margin: 15px 0;
  overflow: hidden;
  background: transparent;
  border: 0;
  border-bottom: 1px solid #ddd;
}

.markdown-body hr:before,
.markdown-body hr:after {
  display: table;
  content: " ";
}

.markdown-body hr:after {
  clear: both;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  margin-top: 15px;
  margin-bottom: 15px;
  line-height: 1.1;
}

.markdown-body h1 {
  font-size: 30px;
}

.markdown-body h2 {
  font-size: 21px;
}

.markdown-body h3 {
  font-size: 16px;
}

.markdown-body h4 {
  font-size: 14px;
}

.markdown-body h5 {
  font-size: 12px;
}

.markdown-body h6 {
  font-size: 11px;
}

.markdown-body blockquote {
  margin: 0;
}

.markdown-body ul,
.markdown-body ol {
  padding: 0;
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body ol ol,
.markdown-body ul ol {
  list-style-type: lower-roman;
}

.markdown-body ul ul ol,
.markdown-body ul ol ol,
.markdown-body ol ul ol,
.markdown-body ol ol ol {
  list-style-type: lower-alpha;
}

.markdown-body dd {
  margin-left: 0;
}

.markdown-body code,
.markdown-body pre,
.markdown-body samp {
  font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
  font-size: 12px;
}

.markdown-body pre {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body kbd {
  background-color: #e7e7e7;
  background-image: -moz-linear-gradient(#fefefe, #e7e7e7);
  background-image: -webkit-linear-gradient(#fefefe, #e7e7e7);
  background-image: linear-gradient(#fefefe, #e7e7e7);
  background-repeat: repeat-x;
  border-radius: 2px;
  border: 1px solid #cfcfcf;
  color: #000;
  padding: 3px 5px;
  line-height: 10px;
  font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  display: inline-block;
}

.markdown-body>*:first-child {
  margin-top: 0 !important;
}

.markdown-body>*:last-child {
  margin-bottom: 0 !important;
}

.markdown-body .headeranchor-link {
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  display: block;
  padding-right: 6px;
  padding-left: 30px;
  margin-left: -30px;
}

.markdown-body .headeranchor-link:focus {
  outline: none;
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3,
.markdown-body h4,
.markdown-body h5,
.markdown-body h6 {
  position: relative;
  margin-top: 1em;
  margin-bottom: 16px;
  font-weight: bold;
  line-height: 1.4;
}

.markdown-body h1 .headeranchor,
.markdown-body h2 .headeranchor,
.markdown-body h3 .headeranchor,
.markdown-body h4 .headeranchor,
.markdown-body h5 .headeranchor,
.markdown-body h6 .headeranchor {
  display: none;
  color: #000;
  vertical-align: middle;
}

.markdown-body h1:hover .headeranchor-link,
.markdown-body h2:hover .headeranchor-link,
.markdown-body h3:hover .headeranchor-link,
.markdown-body h4:hover .headeranchor-link,
.markdown-body h5:hover .headeranchor-link,
.markdown-body h6:hover .headeranchor-link {
  height: 1em;
  padding-left: 8px;
  margin-left: -30px;
  line-height: 1;
  text-decoration: none;
}

.markdown-body h1:hover .headeranchor-link .headeranchor,
.markdown-body h2:hover .headeranchor-link .headeranchor,
.markdown-body h3:hover .headeranchor-link .headeranchor,
.markdown-body h4:hover .headeranchor-link .headeranchor,
.markdown-body h5:hover .headeranchor-link .headeranchor,
.markdown-body h6:hover .headeranchor-link .headeranchor {
  display: inline-block;
}

.markdown-body h1 {
  padding-bottom: 0.3em;
  font-size: 2.25em;
  line-height: 1.2;
  border-bottom: 1px solid #eee;
}

.markdown-body h2 {
  padding-bottom: 0.3em;
  font-size: 1.75em;
  line-height: 1.225;
  border-bottom: 1px solid #eee;
}

.markdown-body h3 {
  font-size: 1.5em;
  line-height: 1.43;
}

.markdown-body h4 {
  font-size: 1.25em;
}

.markdown-body h5 {
  font-size: 1em;
}

.markdown-body h6 {
  font-size: 1em;
  color: #777;
}

.markdown-body p,
.markdown-body blockquote,
.markdown-body ul,
.markdown-body ol,
.markdown-body dl,
.markdown-body table,
.markdown-body pre,
.markdown-body .admonition {
  margin-top: 0;
  margin-bottom: 16px;
}

.markdown-body hr {
  height: 4px;
  padding: 0;
  margin: 16px 0;
  background-color: #e7e7e7;
  border: 0 none;
}

.markdown-body ul,
.markdown-body ol {
  padding-left: 2em;
}

.markdown-body ul ul,
.markdown-body ul ol,
.markdown-body ol ol,
.markdown-body ol ul {
  margin-top: 0;
  margin-bottom: 0;
}

.markdown-body li>p {
  margin-top: 16px;
}

.markdown-body dl {
  padding: 0;
}

.markdown-body dl dt {
  padding: 0;
  margin-top: 16px;
  font-size: 1em;
  font-style: italic;
  font-weight: bold;
}

.markdown-body dl dd {
  padding: 0 16px;
  margin-bottom: 16px;
}

.markdown-body blockquote {
  padding: 0 15px;
  color: #777;
  border-left: 4px solid #ddd;
}

.markdown-body blockquote>:first-child {
  margin-top: 0;
}

.markdown-body blockquote>:last-child {
  margin-bottom: 0;
}

.markdown-body table {
  display: block;
  width: 100%;
  overflow: auto;
  word-break: normal;
  word-break: keep-all;
}

.markdown-body table th {
  font-weight: bold;
}

.markdown-body table th,
.markdown-body table td {
  padding: 6px 13px;
  border: 1px solid #ddd;
}

.markdown-body table tr {
  background-color: #fff;
  border-top: 1px solid #ccc;
}

.markdown-body table tr:nth-child(2n) {
  background-color: #f8f8f8;
}

.markdown-body img {
  max-width: 100%;
  -moz-box-sizing: border-box;
  box-sizing: border-box;
}

.markdown-body code,
.markdown-body samp {
  padding: 0;
  padding-top: 0.2em;
  padding-bottom: 0.2em;
  margin: 0;
  font-size: 85%;
  background-color: rgba(0,0,0,0.04);
  border-radius: 3px;
}

.markdown-body code:before,
.markdown-body code:after {
  letter-spacing: -0.2em;
  content: "\00a0";
}

.markdown-body pre>code {
  padding: 0;
  margin: 0;
  font-size: 100%;
  word-break: normal;
  white-space: pre;
  background: transparent;
  border: 0;
}

.markdown-body .codehilite {
  margin-bottom: 16px;
}

.markdown-body .codehilite pre,
.markdown-body pre {
  padding: 16px;
  overflow: auto;
  font-size: 85%;
  line-height: 1.45;
  background-color: #f7f7f7;
  border-radius: 3px;
}

.markdown-body .codehilite pre {
  margin-bottom: 0;
  word-break: normal;
}

.markdown-body pre {
  word-wrap: normal;
}

.markdown-body pre code {
  display: inline;
  max-width: initial;
  padding: 0;
  margin: 0;
  overflow: initial;
  line-height: inherit;
  word-wrap: normal;
  background-color: transparent;
  border: 0;
}

.markdown-body pre code:before,
.markdown-body pre code:after {
  content: normal;
}

/* Admonition */
.markdown-body .admonition {
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  position: relative;
  border-radius: 3px;
  border: 1px solid #e0e0e0;
  border-left: 6px solid #333;
  padding: 10px 10px 10px 30px;
}

.markdown-body .admonition table {
  color: #333;
}

.markdown-body .admonition p {
  padding: 0;
}

.markdown-body .admonition-title {
  font-weight: bold;
  margin: 0;
}

.markdown-body .admonition>.admonition-title {
  color: #333;
}

.markdown-body .attention>.admonition-title {
  color: #a6d796;
}

.markdown-body .caution>.admonition-title {
  color: #d7a796;
}

.markdown-body .hint>.admonition-title {
  color: #96c6d7;
}

.markdown-body .danger>.admonition-title {
  color: #c25f77;
}

.markdown-body .question>.admonition-title {
  color: #96a6d7;
}

.markdown-body .note>.admonition-title {
  color: #d7c896;
}

.markdown-body .admonition:before,
.markdown-body .attention:before,
.markdown-body .caution:before,
.markdown-body .hint:before,
.markdown-body .danger:before,
.markdown-body .question:before,
.markdown-body .note:before {
  font: normal normal 16px fontawesome-mini;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  line-height: 1.5;
  color: #333;
  position: absolute;
  left: 0;
  top: 0;
  padding-top: 10px;
  padding-left: 10px;
}

.markdown-body .admonition:before {
  content: "\f056\00a0";
  color: 333;
}

.markdown-body .attention:before {
  content: "\f058\00a0";
  color: #a6d796;
}

.markdown-body .caution:before {
  content: "\f06a\00a0";
  color: #d7a796;
}

.markdown-body .hint:before {
  content: "\f05a\00a0";
  color: #96c6d7;
}

.markdown-body .danger:before {
  content: "\f057\00a0";
  color: #c25f77;
}

.markdown-body .question:before {
  content: "\f059\00a0";
  color: #96a6d7;
}

.markdown-body .note:before {
  content: "\f040\00a0";
  color: #d7c896;
}

.markdown-body .admonition::after {
  content: normal;
}

.markdown-body .attention {
  border-left: 6px solid #a6d796;
}

.markdown-body .caution {
  border-left: 6px solid #d7a796;
}

.markdown-body .hint {
  border-left: 6px solid #96c6d7;
}

.markdown-body .danger {
  border-left: 6px solid #c25f77;
}

.markdown-body .question {
  border-left: 6px solid #96a6d7;
}

.markdown-body .note {
  border-left: 6px solid #d7c896;
}

.markdown-body .admonition>*:first-child {
  margin-top: 0 !important;
}

.markdown-body .admonition>*:last-child {
  margin-bottom: 0 !important;
}

/* progress bar*/
.markdown-body .progress {
  display: block;
  width: 300px;
  margin: 10px 0;
  height: 24px;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #ededed;
  position: relative;
  box-shadow: inset -1px 1px 3px rgba(0, 0, 0, .1);
}

.markdown-body .progress-label {
  position: absolute;
  text-align: center;
  font-weight: bold;
  width: 100%; margin: 0;
  line-height: 24px;
  color: #333;
  text-shadow: 1px 1px 0 #fefefe, -1px -1px 0 #fefefe, -1px 1px 0 #fefefe, 1px -1px 0 #fefefe, 0 1px 0 #fefefe, 0 -1px 0 #fefefe, 1px 0 0 #fefefe, -1px 0 0 #fefefe, 1px 1px 2px #000;
  -webkit-font-smoothing: antialiased !important;
  white-space: nowrap;
  overflow: hidden;
}

.markdown-body .progress-bar {
  height: 24px;
  float: left;
  -webkit-border-radius: 3px;
  -moz-border-radius: 3px;
  border-radius: 3px;
  background-color: #96c6d7;
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, .5), inset 0 -1px 0 rgba(0, 0, 0, .1);
  background-size: 30px 30px;
  background-image: -webkit-linear-gradient(
    135deg, rgba(255, 255, 255, .4) 27%,
    transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%,
    transparent 77%, transparent
  );
  background-image: -moz-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -ms-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: -o-linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
  background-image: linear-gradient(
    135deg,
    rgba(255, 255, 255, .4) 27%, transparent 27%,
    transparent 52%, rgba(255, 255, 255, .4) 52%,
    rgba(255, 255, 255, .4) 77%, transparent 77%,
    transparent
  );
}

.markdown-body .progress-100plus .progress-bar {
  background-color: #a6d796;
}

.markdown-body .progress-80plus .progress-bar {
  background-color: #c6d796;
}

.markdown-body .progress-60plus .progress-bar {
  background-color: #d7c896;
}

.markdown-body .progress-40plus .progress-bar {
  background-color: #d7a796;
}

.markdown-body .progress-20plus .progress-bar {
  background-color: #d796a6;
}

.markdown-body .progress-0plus .progress-bar {
  background-color: #c25f77;
}

.markdown-body .candystripe-animate .progress-bar{
  -webkit-animation: animate-stripes 3s linear infinite;
  -moz-animation: animate-stripes 3s linear infinite;
  animation: animate-stripes 3s linear infinite;
}

@-webkit-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@-moz-keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

@keyframes animate-stripes {
  0% {
    background-position: 0 0;
  }

  100% {
    background-position: 60px 0;
  }
}

.markdown-body .gloss .progress-bar {
  box-shadow:
    inset 0 4px 12px rgba(255, 255, 255, .7),
    inset 0 -12px 0 rgba(0, 0, 0, .05);
}

/* Multimarkdown Critic Blocks */
.markdown-body .critic_mark {
  background: #ff0;
}

.markdown-body .critic_delete {
  color: #c82829;
  text-decoration: line-through;
}

.markdown-body .critic_insert {
  color: #718c00 ;
  text-decoration: underline;
}

.markdown-body .critic_comment {
  color: #8e908c;
  font-style: italic;
}

.markdown-body .headeranchor {
  font: normal normal 16px octicons-anchor;
  line-height: 1;
  display: inline-block;
  text-decoration: none;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
}

.headeranchor:before {
  content: '\f05c';
}

.markdown-body .task-list-item {
  list-style-type: none;
}

.markdown-body .task-list-item+.task-list-item {
  margin-top: 3px;
}

.markdown-body .task-list-item input {
  margin: 0 4px 0.25em -20px;
  vertical-align: middle;
}

/* Media */
@media only screen and (min-width: 480px) {
  .markdown-body {
    font-size:14px;
  }
}

@media only screen and (min-width: 768px) {
  .markdown-body {
    font-size:16px;
  }
}

@media print {
  .markdown-body * {
    background: transparent !important;
    color: black !important;
    filter:none !important;
    -ms-filter: none !important;
  }

  .markdown-body {
    font-size:12pt;
    max-width:100%;
    outline:none;
    border: 0;
  }

  .markdown-body a,
  .markdown-body a:visited {
    text-decoration: underline;
  }

  .markdown-body .headeranchor-link {
    display: none;
  }

  .markdown-body a[href]:after {
    content: " (" attr(href) ")";
  }

  .markdown-body abbr[title]:after {
    content: " (" attr(title) ")";
  }

  .markdown-body .ir a:after,
  .markdown-body a[href^="javascript:"]:after,
  .markdown-body a[href^="#"]:after {
    content: "";
  }

  .markdown-body pre {
    white-space: pre;
    white-space: pre-wrap;
    word-wrap: break-word;
  }

  .markdown-body pre,
  .markdown-body blockquote {
    border: 1px solid #999;
    padding-right: 1em;
    page-break-inside: avoid;
  }

  .markdown-body .progress,
  .markdown-body .progress-bar {
    -moz-box-shadow: none;
    -webkit-box-shadow: none;
    box-shadow: none;
  }

  .markdown-body .progress {
    border: 1px solid #ddd;
  }

  .markdown-body .progress-bar {
    height: 22px;
    border-right: 1px solid #ddd;
  }

  .markdown-body tr,
  .markdown-body img {
    page-break-inside: avoid;
  }

  .markdown-body img {
    max-width: 100% !important;
  }

  .markdown-body p,
  .markdown-body h2,
  .markdown-body h3 {
    orphans: 3;
    widows: 3;
  }

  .markdown-body h2,
  .markdown-body h3 {
    page-break-after: avoid;
  }
}
</style><title>README</title></head><body><article class="markdown-body"><h1 id="hyperloop-showcase"><a name="user-content-hyperloop-showcase" href="#hyperloop-showcase" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>HyperLoop Showcase</h1>
<p>This is a simple Rails application showcasing <strong>HyperReact</strong> (wrapper for the React.js library for creating user interfaces), Opal, NPM, Webpack, React Bootstrap, <strong>HyperMesh</strong> (gives your <strong>HyperReact</strong> components CRUD access to your server side ActiveRecord models and implements push notifications)  and other associated technologies. </p>
<p>This Showcase application will mix native React and <strong>HyperReact</strong> components, be styled by Bootstrap CSS (using ReactBootstrap), display a video (using a native React component) and use <strong>HyperMesh</strong> to handle data for an Events feed app.</p>
<p>The Showcase application will look like this:</p>
<p><img alt="Screen" src="/home/fcooker/rails/hyperloop-showcase/public/screen.png" /></p>
<h3 id="technologies-highlighted-in-this-showcase-application"><a name="user-content-technologies-highlighted-in-this-showcase-application" href="#technologies-highlighted-in-this-showcase-application" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Technologies highlighted in this Showcase application</h3>
<ul>
<li>For the backend we are using <a href="http://rubyonrails.org/">Rails 5.0.1</a> with <a href="https://www.ruby-lang.org/en/news/2016/04/26/ruby-2-3-1-released/">Ruby 2.3.1</a></li>
<li><a href="https://www.npmjs.com/">NPM</a> and <a href="https://webpack.github.io/">Webpack</a> to manage front end assets</li>
<li><a href="https://github.com/ruby-hyperloop/hyper-rails">HypeRails</a> to install <a href="https://github.com/ruby-hyperloop/hyper-react">HyperReact</a> and Opal in Rails 4.x or 5.x</li>
<li><a href="https://github.com/ruby-hyperloop/hyper-react">HyperReact</a> to use <a href="https://facebook.github.io/react/">React</a> with Rails and to write reactive UI components with Ruby&rsquo;s elegance</li>
<li><a href="https://react-bootstrap.github.io/">React Bootstrap</a> to show how to use native React components in <a href="https://github.com/ruby-hyperloop/hyper-react">HyperReact</a></li>
<li><a href="https://github.com/ruby-hyperloop/hyper-mesh">HyperMesh</a> between Rails models and the front end and to magically push <br />
  changed data between all connected clients</li>
<li><a href="https://github.com/fkchang/opal-hot-reloader">HyperReact Hot-Reloader and Opal IRB</a> for programmer joy and hot-loading with developing</li>
</ul>
<h2 id="introduction"><a name="user-content-introduction" href="#introduction" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Introduction</h2>
<h3 id="introductions-to-hyperreact"><a name="user-content-introductions-to-hyperreact" href="#introductions-to-hyperreact" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Introductions to <strong>HyperReact</strong></h3>
<ul>
<li><a href="http://slides.com/mitchvanduyn/deck-1-3#/">An overview of HyperReact (formerly Reactrb) by Mitch VanDuyn</a></li>
<li><a href="http://www.slideshare.net/fkchang/reactrb-all-the-power-of-reactjs-with-all-the-joy-of-ruby">Power of React-js with the joy of Ruby by Forrest Chang</a></li>
</ul>
<h3 id="hyperreact-help-and-questions"><a name="user-content-hyperreact-help-and-questions" href="#hyperreact-help-and-questions" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>HyperReact Help and Questions</h3>
<ul>
<li><a href="https://gitter.im/reactrb/chat">Gitter.im</a> for general questions, discussion, and interactive help.</li>
<li><a href="http://stackoverflow.com/questions/tagged/reactrb">Stack Overflow</a> tag <code>reactrb</code> for specific problems.</li>
<li><a href="https://github.com/ruby-hyperloop/hyper-react/issues">Github Issues</a> for bugs, feature enhancements, etc.</li>
<li><a href="#further-reading">Further reading</a> at the end of this tutorial</li>
</ul>
<h3 id="using-npm-and-webpack-alongside-rails"><a name="user-content-using-npm-and-webpack-alongside-rails" href="#using-npm-and-webpack-alongside-rails" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Using NPM and Webpack alongside Rails</h3>
<p>Ruby libraries are distributed as gems, and are managed in your Rails app using the Gemfile and bundler.</p>
<p>In the Javascript world things are still evolving but I have found that the easiest way to manage Javascript libraries is using NPM (Node Package Manager) and Webpack.  Pretty much every front end library is packaged with NPM these days so it is easy to get help and most things just work.</p>
<p>Happily NPM, Webpack, Rails, and <strong>HyperReact</strong> can all play together very nicely.</p>
<ul>
<li><a href="https://www.npmjs.com/">NPM</a></li>
<li><a href="https://www.npmjs.com/package/webpack">Webpack</a></li>
</ul>
<p>This tutorial requires that Ruby, Rails, NPM and Webpack are installed. Please see their websites for installation instructions.</p>
<h2 id="setup"><a name="user-content-setup" href="#setup" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Setup</h2>
<h3 id="step-1-creating-a-new-rails-application"><a name="user-content-step-1-creating-a-new-rails-application" href="#step-1-creating-a-new-rails-application" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Step 1: Creating a new Rails application</h3>
<pre><code>    rails new hyperloop-showcase
    cd hyperloop-showcase
    bundle install
</code></pre>

<p>Update your Database config file for accessing your Database properly : <code>config/database.yml</code></p>
<p>Then execute </p>
<pre><code>    rails db:create
</code></pre>

<p>You should have a empty Rails application</p>
<pre><code>    bundle exec rails s
</code></pre>

<p>And in your browser</p>
<pre><code>    http://localhost:3000/
</code></pre>

<p>You should be seeing the Rails Welcome aboard page. Great, Rails is now installed. Lets get started with the interesting stuff.</p>
<h3 id="step-2-adding-hyperreact-and-hypermesh"><a name="user-content-step-2-adding-hyperreact-and-hypermesh" href="#step-2-adding-hyperreact-and-hypermesh" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Step 2: Adding HyperReact and HyperMesh</h3>
<p>There are 2 ways do achieve that :</p>
<ul>
<li>Using <strong>HyperLoop</strong> installation generator<br />
OR</li>
<li>Manually.</li>
</ul>
<p>In this tutorial we advise you to follow the manual way, so you can see what&rsquo;s happen and you can be sure to have all gems versions identical to those used in this tutorial.</p>
<p>if you want to see the automatic way for the future you can go to the official <strong>HyperLoop web page</strong> : <a href="http://ruby-hyperloop.io/installation/#with-rails">HyperLoop installation with Rails</a></p>
<h4 id="manual-installation-of-hyperreact-and-hypermesh"><a name="user-content-manual-installation-of-hyperreact-and-hypermesh" href="#manual-installation-of-hyperreact-and-hypermesh" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Manual installation of HyperReact and HyperMesh</h4>
<h5 id="step-21-add-the-gems"><a name="user-content-step-21-add-the-gems" href="#step-21-add-the-gems" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Step 2.1: Add the gems</h5>
<p>in your <code>Gemfile</code><br />
<pre><code class="ruby">    gem 'react-rails', '1.4.2'
    gem 'hyper-rails', '0.4.1'
    gem 'opal-rails', '0.9.1'
    gem 'opal-browser', '0.2.0'
    gem 'hyper-react', '0.11.0'
    gem 'hyper-mesh', '0.5.3'
    gem 'hyper-router', '2.4.0'
    gem 'therubyracer', platforms: :ruby
</code></pre><br />
Then run<br />
<pre><code>bundle update
</code></pre></p>
<h3 id="step-3-webpack-for-managing-front-end-assets"><a name="user-content-step-3-webpack-for-managing-front-end-assets" href="#step-3-webpack-for-managing-front-end-assets" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Step 3: Webpack for managing front-end assets</h3>
<p>There are three parts to this step:  </p>
<ul>
<li>Setting up NPM (node package manager) for the project</li>
<li>Setting up Webpack</li>
<li>Updating the rails asset pipeline to use the bundles generated by Webpack</li>
</ul>
<p>This is just a matter of adding 4 boiler plate files, and updating two of your rails files.</p>
<p>First add a package.json file to your root directory (same place as your Gemfile) like this:</p>
<pre><code>// package.json
{
    "name": "reactrb-showcase",
    "version": "0.0.1",
    "dependencies": {
        "bootstrap": "^3.3.6",
        "react": "^0.14.2",      
        "react-dom": "^0.14.2",
        "react-bootstrap": "^0.29.5",
        "webpack": "^1.13.1"
    },
        "devDependencies": {
    }
}
</code></pre>
<p>Notice how similar this is to your Gemfile.</p>
<p>Now run <code>npm install</code> which will make sure you have all these packages.</p>
<p>So that we can run Webpack from the command line do a <code>npm install webpack -g</code></p>
<p>Now that we have Webpack, we need to add 3 boiler plate files to configure it.  As you add more javascript packages you will be updating these files.  Again this is similar to updating your Gemfile when you add new gems to a project.</p>
<p>Add webpack.config.js to the root of your project:</p>
<p><pre><code class="javascript">var path = require(&quot;path&quot;);

module.exports = {
    context: __dirname,
    entry: {
      client_only:  &quot;./webpack/client_only.js&quot;,
      client_and_server: &quot;./webpack/client_and_server.js&quot;
    },
    output: {
      path: path.join(__dirname, 'app', 'assets',   'javascripts', 'webpack'),
      filename: &quot;[name].js&quot;,
      publicPath: &quot;/webpack/&quot;
    },
    module: {
      loaders: [
        // add any loaders here
      ]
    },
    resolve: {
      root: path.join(__dirname, '..', 'webpack')
    },
};
</code></pre><br />
and create a folder called <code>webpack</code> and add the following two files:</p>
<pre><code class="javascript">// webpack/client_only.js
// any packages that depend specifically on the DOM go here
// for example the webpack css loader generates code that will break prerendering
console.log('client_only.js loaded');
</code></pre>

<pre><code class="javascript">// webpack/client_and_server.js
// all other packages that you can run on both server (prerendering) and client go here
// most well behaved packages can be required here
ReactDOM = require('react-dom')
React = require('react')
console.log('client_and_server.js loaded')
</code></pre>

<p>Now run <code>webpack</code> from the command line.  This will grab all necessary dependencies and package them up into the <code>client_and_server.js</code> and <code>client_only.js</code> bundles.  If you look in the <code>app/assets/javascripts/webpack</code> directory you should see the two files there.</p>
<p>Finally we need to require these two bundles into our rails asset pipeline.</p>
<p>Edit <code>app/assets/javascript/application.js</code> and add<br />
<pre><code class="javascript">//= require 'webpack/client_only'
</code></pre><br />
just <em>above</em> the line that reads <code>Opal.load('components');</code>.  This will pull in any webpack assets that can only run on the client.</p>
<p>Then edit <code>app/views/components.rb</code> and replace the <code>require 'react'</code> line with<br />
<pre><code class="ruby">require 'webpack/client_and_server.js'
</code></pre></p>
<p>In otherwords instead of pulling in react from the react-rails gem, we are going to pull in react <em>and</em> any other javascript packages we want from our webpack bundle.</p>
<p>Reactrb can automatically access our components loaded by Webpack, but we have to opt in to this behavior.  Edit <code>app/views/components.rb</code> and add<br />
<pre><code class="ruby">require 'reactrb/auto-import'
</code></pre></p>
<p>immediately after <code>require 'reactrb'</code> (which is right near the top of the file.)  Auto-import will now search the javascript name space, and import into ruby any components that are referenced by your Reactrb components.</p>
<p>Now run <code>bundle exec rails s</code> and refresh the browser.  Look at the console and you should see something like this:</p>
<pre><code class="text">client_and_server.js loaded
client_only.js loaded
client_and_server.js loaded
************************ React Prerendering Context Initialized Show ***********************
************************ React Browser Context Initialized ****************************
Reactive record prerendered data being loaded: [Object]
</code></pre>

<p>Congratulations you are setup and ready to begin adding javascript packages to your application.</p>
<h2 id="working-with-native-react-components"><a name="user-content-working-with-native-react-components" href="#working-with-native-react-components" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Working with native React components</h2>
<p>It is time to reap some of the rewards from all the hard work above. We have everything setup so we can easily add front end components and work with them in Reactrb. Lets jump in and add a native React component that plays a video.</p>
<p><a href="https://github.com/CookPete/rplayr">We are going to use Pete Cook&rsquo;s React rplayr</a></p>
<p>First let&rsquo;s install the component via NPM:<br />
<pre><code class="text">npm install react-player --save
</code></pre></p>
<p>Next we need to <code>require</code> it in <code>webpack/client_and_server.js</code><br />
<pre><code class="javascript">ReactPlayer = require('react-player')
</code></pre></p>
<p>Next run webpack so it can be bundled<br />
<pre><code class="text">webpack
</code></pre></p>
<p>And then finally let&rsquo;s add it to our Show component:<br />
<pre><code class="ruby">def render
  div do
    ReactPlayer(url:  'https://www.youtube.com/embed/FzCsDVfPQqk',
      playing: true
    )
  end
end
</code></pre></p>
<p>Refresh your browser and you should have a video. How simple was that!</p>
<h2 id="working-with-react-bootstrap"><a name="user-content-working-with-react-bootstrap" href="#working-with-react-bootstrap" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Working with React Bootstrap</h2>
<p><a href="https://react-bootstrap.github.io/">We will be using React Bootstrap which is a native React library</a></p>
<p>The main purpose for React Bootstrap is that it abstracts away verbose HTML &amp; CSS code into React components which makes it a lot cleaner for React JSX developers. One of the very lovely things about Reactrb is that we already work in beautiful Ruby. To emphasise this point, consider the following:</p>
<p>Sample 1 - In HTML (without React Bootstrap):</p>
<pre><code>&lt;button id="something-btn" type="button" class="btn btn-success btn-sm"&gt;
  Something
&lt;/button&gt;
$('#something-btn').click(someCallback);
</code></pre>
<p>Sample 2 - In JSX (with React Bootstrap components):</p>
<pre><code>&lt;Button bsStyle="success" bsSize="small" onClick={someCallback}&gt;
  Something
&lt;/Button&gt;
</code></pre>
<p>Sample 3 - In Reactrb (without React Bootstrap):</p>
<pre><code>button.btn_success.btn_sm {'Something'}.on(:click) do
    someMethod
end
</code></pre>
<p>Sample 4 - In Reactrb (with React Bootstrap):</p>
<pre><code>Bs.Button(bsStyle: 'success' bsSize: "small") {'Something'}.on(:click) do
    someMethod
end
</code></pre>
<p>As you can see, sample 3 &amp; 4 are not that different and as a Reactrb developer, I actually prefer sample 3. If I were a JavaScript or JSX developer I would completely understand the advantage of abstracting Bootstrap CSS into React Components so I don&rsquo;t have to work directly with CSS and JavaScript but this is not the case with Reactrb as CSS classes are added to HTML elements with simple dot notation:</p>
<pre><code>span.pull_right {}
</code></pre>
<p>compiles to (note the conversion from _ to -)</p>
<pre><code>&lt;span class='pull-right'&gt;&lt;/span&gt;
</code></pre>
<p>So I hear you ask: why if I prefer the non-React Bootstrap syntax why am worrying about React Bootstrap? For one very simple reason: components like Navbar and Modal that requires <code>bootstrap.js</code> will not work with React on it&rsquo;s own so without the React Bootstrap project you would need to implement all that functionality yourself. The React Bootstrap project has re-implemented all this functionality as React components.</p>
<p>Lets implement a Navbar in this project using React Bootstrap in Reactrb. First, we need to install Bootstrap and React Bootstrap:</p>
<pre><code>npm install bootstrap react-bootstrap --save
</code></pre>
<p>Note: The <code>--save</code> option will update the package.json file.</p>
<p>And then we need to <code>require</code> it in <code>webpack/client_and_server.js</code> by adding this line:<br />
<pre><code class="javascript">ReactBootstrap = require('react-bootstrap')
</code></pre><br />
Run the <code>webpack</code> command again, and restart your rails server.</p>
<p>If you refresh your browser now and open the JavaScript console we will be able to interact with React Bootstrap by typing:</p>
<p>In the JavaScript console type: <code>ReactBootstrap</code></p>
<p>and you will see the ReactBootstrap object with all its components like Accordion, Alert, Badge, Breadcrumb, etc. This is great news, React Bootstrap is installed and ready to use. Accessing the JavaScript object in this way is a really great way to see what you have to work with. Sometimes the documentation of a component is not as accurate as actually seeing what you have in the component itself.</p>
<p>To make sure everything is working lets add a <em>Button</em> to our our Show component like this:</p>
<p><pre><code class="ruby">module Components
  module Home
    class Show &lt; React::Component::Base
      def render
        ReactBootstrap::Button(bsStyle: 'success', bsSize: &quot;small&quot;) do
          'Success'
        end.on(:click) do
          alert('you clicked me!')
        end
      end
    end
  end
end
</code></pre><br />
Notice that we reference <code>ReactBoostrap</code> in ruby using the same identifer that was in the require statement in our <code>client_and_server.js</code> webpack bundle.  The first time Reactrb hits the <code>ReactBootstrap</code> constant it will not be defined. This triggers a search of the javascript name space for something that looks either like a component or library of components.  It then defines the appropriate module or component class wrapper in ruby.</p>
<p>Visit your page and if all is well you will see a clickable button.  However it will not have any styles.  This is because ReactBootstrap does not automatically depend on any particular style sheet, so we will have to supply one.  An easy way to do this is to just copy the css file from the bootstrap repo, and stuff it our rails assets directory, however with a little upfront work we can setup webpack to do it all for us.</p>
<p>First lets add four webpack <em>loaders</em> using npm:<br />
<pre><code class="text">npm install css-loader file-loader style-loader url-loader --save-dev
</code></pre><br />
Notice we use <code>--save-dev</code> instead of just <code>--save</code> as these packages are only used in the development process.</p>
<p>Now edit your <code>webpack.config.js</code> file, and update the loaders section so it looks like this:</p>
<pre><code class="javascript">var path = require(&quot;path&quot;);

module.exports = {
...
    module: {
      loaders: [
        { test: /\.css$/,
          loader: &quot;style-loader!css-loader&quot;
        },
        { test: /\.(woff|woff2)(\?v=\d+\.\d+\.\d+)?$/,
          loader: 'url?limit=10000&amp;mimetype=application/font-woff'
        },
        { test: /\.ttf(\?v=\d+\.\d+\.\d+)?$/,
          loader: 'url?limit=10000&amp;mimetype=application/octet-stream'
        },
        { test: /\.eot(\?v=\d+\.\d+\.\d+)?$/,
          loader: 'file'
        },
        { test: /\.svg(\?v=\d+\.\d+\.\d+)?$/,
          loader: 'url?limit=10000&amp;mimetype=image/svg+xml'
        }
      ]
    },
...
};
</code></pre>

<p>We have set webpack up so that when a css file is required it uses the style loader to process the file.  Because the bootstrap css file will require font face files, we also have 4 font loaders.  All this will package up everything when we require any css file.</p>
<p>Now we are ready to require CSS files, and have webpack build a complete bundle including the css and any fonts referenced.</p>
<p>To bundle in the bootstrap css file add this line to <code>webpack/client_only.js</code><br />
<pre><code class="javascript">require('bootstrap/dist/css/bootstrap.css');
</code></pre></p>
<p>And install the bootstrap package<br />
<pre><code class="text">npm install bootstrap --save
</code></pre></p>
<p>Now run <code>webpack</code> to update our bundles, and restart your server.  Now our button is properly styled you should be rewarded with a nice Bootstrap styled green Success Button.</p>
<p>Now that everything is loaded, lets update our component to use a few more of the Bootstrap components.  Update your Show component so that it looks like this:</p>
<pre><code class="ruby">module Components
  module Home
    class Show &lt; React::Component::Base

      def say_hello(i)
        alert &quot;Hello from number #{i}&quot;
      end

      def render
        div do
          ReactBootstrap::Navbar(bsStyle: :inverse) do
            ReactBootstrap::Nav() do
              ReactBootstrap::NavbarBrand() do
                a(href: '#') { 'Reactrb Showcase' }
              end
              ReactBootstrap::NavDropdown(
                eventKey: 1,
                title: 'Things',
                id: :drop_down
              ) do
                (1..5).each do |n|
                  ReactBootstrap::MenuItem(href: '#',
                    key: n,
                    eventKey: &quot;1.#{n}&quot;
                  ) do
                    &quot;Number #{n}&quot;
                  end.on(:click) { say_hello(n) }
                end
              end
            end
          end
          div.container do
            ReactPlayer(url: 'https://www.youtube.com/embed/FzCsDVfPQqk',
              playing: true
            )
          end
        end
      end
    end
  end
end
</code></pre>

<p>A few things to notice in the code above:</p>
<p>We add React Bootstrap components simply by <code>ReactBootstrap::Name</code> where <code>Name</code> is the JavaScriot component you want to render. All the components are documented in the React Bootstrap <a href="https://react-bootstrap.github.io/components.html">documentation</a></p>
<p>See with <code>div.container</code> we are mixing in CSS style which will compile into <code>&lt;div class='container'&gt;</code></p>
<p>Also notice how I have added an <code>.on(:click)</code> event handler to the <code>MenuItem</code> component while setting <code>href: '#'</code> as this will allow us to handle the event instead of navigating to a new page.</p>
<p>So far we have a very basic application which is looking OK and showing a video. Time to do something a little more interesting. How about if we add Post and Comment functionality which will let us explore Reactive Record!</p>
<h2 id="using-reactrb-reactive-record"><a name="user-content-using-reactrb-reactive-record" href="#using-reactrb-reactive-record" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Using Reactrb Reactive Record</h2>
<p><a href="https://github.com/reactrb/reactive-record">We will be using the Reactive Record gem</a></p>
<p>Reactive Record compiles your Active Record models so they are accessible to the front-end and implements an API based on your models and their associations. Lazy loads just the data that is needed to render a component and is fully integrated with Reactrb and paired with Synchromesh to push database changes to all connected clients. ReactiveRecord and Synchromesh give you Relay + GraphQL like functionality with a fraction of the effort and complexity (the original idea for Reactive Record is credited to <a href="https://github.com/voltrb/volt">Volt</a> and not Relay).</p>
<h3 id="installing-reactive-record"><a name="user-content-installing-reactive-record" href="#installing-reactive-record" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Installing Reactive Record</h3>
<p>Installing Reactive Record is straight forward.</p>
<p>First add this line to your application&rsquo;s Gemfile:</p>
<pre><code class="ruby">gem 'reactive-record'
</code></pre>

<p>And then execute:</p>
<pre><code>$ bundle install
</code></pre>

<p>Finally you need to add a line to your <code>routes.rb</code>:</p>
<pre><code class="ruby">mount ReactiveRecord::Engine =&gt; '/rr'
</code></pre>

<h3 id="creating-the-models"><a name="user-content-creating-the-models" href="#creating-the-models" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Creating the models</h3>
<p>We are going to need a few models to work with so let&rsquo;s go ahead and create those now.</p>
<pre><code class="text">rails g model Post
rails g model Comment post:references
</code></pre>

<p>And then before you run the migrations, lets flesh them out a little so they look like this:</p>
<pre><code class="ruby"># db/migrate/..create_posts.rb
class CreatePosts &lt; ActiveRecord::Migration
  def change
    create_table :posts do |t|
      t.string :body
      t.timestamps null: false
    end
  end
end

# db/migrate/..create_comments.rb
class CreateComments &lt; ActiveRecord::Migration
  def change
    create_table :comments do |t|
      t.references :post, index: true, foreign_key: true
      t.string :body
      t.timestamps null: false
    end
  end
end
</code></pre>

<p>Now would be a good time to run the migrations:</p>
<pre><code class="text">rake db:migrate
</code></pre>

<h3 id="making-your-models-accessible-to-reactive-record"><a name="user-content-making-your-models-accessible-to-reactive-record" href="#making-your-models-accessible-to-reactive-record" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Making your models accessible to Reactive Record</h3>
<p>Reactive Record needs to &lsquo;see&rsquo; your models as a representation of them get compiled into JavaScript along with your Reactrb components so they are accessible in your client side code.</p>
<p>The convention (though this is choice and you can change this if you prefer) is to create a <code>public</code> folder under <code>models</code> and then provide a linkage file which will <code>require_tree</code> your models when compiling <code>components.rb</code>.</p>
<p>Create a new folder:</p>
<pre><code class="text">models/public
</code></pre>

<p>Then move <code>post.rb</code> and <code>comment.rb</code> to <code>models/public</code></p>
<pre><code class="text">$ mv app/models/post.rb app/models/public
$ mv app/models/comment.rb app/models/public
</code></pre>

<p>Next create <code>_react_public_models.rb</code> in your models folder:</p>
<pre><code class="ruby"># models/_react_public_models.rb
require_tree './public'
</code></pre>

<p>Finally add a line to your <code>views/components.rb</code> file:</p>
<pre><code class="ruby"># views/components.rb
...
require '_react_public_models'
</code></pre>

<h3 id="model-associations"><a name="user-content-model-associations" href="#model-associations" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Model Associations</h3>
<p>Reactive Record is particular about both sides of an association being specified. If you forget to do this you will see warnings to this effect.</p>
<pre><code class="ruby"># models/public/post.rb
class Post &lt; ActiveRecord::Base
  has_many :comments
end

# models/public/comment.rb
class Comment &lt; ActiveRecord::Base
  belongs_to :post
end
</code></pre>

<h3 id="accessing-your-models-in-reactrb-components"><a name="user-content-accessing-your-models-in-reactrb-components" href="#accessing-your-models-in-reactrb-components" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Accessing your models in Reactrb components</h3>
<p>To get started, lets create a new component which will display a list of Posts and Comments under the video:</p>
<pre><code class="ruby"># views/components/show.rb
...
div.container do
  ReactPlayer(url: 'https://www.youtube.com/embed/FzCsDVfPQqk', playing: true)
  br # line break
  PostsList()
end
...
</code></pre>

<p>Note that to place a Reactrb component you either need to include ( ) or { }, so <code>PostsList()</code> or <code>PostsList { }</code> would be valid but just <code>PostsList</code> would not.</p>
<p>Next lets create the <code>PostsList</code> component:</p>
<pre><code class="ruby">module Components
  module Home
    class PostsList &lt; React::Component::Base
      define_state :new_post, &quot;&quot;

      before_mount do
        # note that this will lazy load posts
        # and only the fields that are needed will be requested
        @posts = Post.all
      end

      def render
        div do
          new_post
          ul.list_unstyled do
            @posts.reverse.each do |post|
              PostListItem(post: post)
              CommentsList(comments: post.comments)
            end
          end
        end
      end

      def new_post
        ReactBootstrap::FormGroup() do
          ReactBootstrap::FormControl(
            value: state.new_post,
            type: :text,
          ).on(:change) { |e|
            state.new_post! e.target.value
          }
        end
        ReactBootstrap::Button(bsStyle: :primary) do
          &quot;Post&quot;
        end.on(:click) { save_new_post }
      end

      def save_new_post
        post = Post.new(body: state.new_post)
        post.save do |result|
          # note that save is a promise so this code will only run after the save
          # yet react will move onto the code after this (before the save happens)
          alert &quot;unable to save&quot; unless result == true
        end
        state.new_post! &quot;&quot;
      end
    end

    class PostListItem &lt; React::Component::Base
      param :post

      def render
        li do
          # note how you access post.body just like with Active Record
          h4 { params.post.body }
        end
      end

    end
  end
end
</code></pre>

<p>Things to note in the code above:</p>
<p>See how we fetch the Reactive Record Post collection in <code>before_mount</code>. Setting this here instead of in <code>after_mount</code> means that we do not need to worry about <code>@posts</code> being <code>nil</code> as the collection will always contain at least one entry with the actual records being lazy loaded when needed.</p>
<p>Note how we are binding the state variable <code>new_post</code> to the <code>FormControl</code> and then setting its value based on the value being passed to the <code>.on(:change)</code> block. This is a standard React pattern.</p>
<p>Also see how we are saving the new post where Reactive Record&rsquo;s save returns a promise which means that the block after save is only evaluated when it returns yet React would have moved on to the rest of the code.</p>
<p>Finally note that there is no code which checks to see if there are new posts yet when you run this, the list of posts remains magically up-to-date.</p>
<p>Welcome to the wonderful of Reactive Record and React!</p>
<h2 id="synchromesh"><a name="user-content-synchromesh" href="#synchromesh" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Synchromesh</h2>
<p><a href="https://github.com/reactrb/synchromesh">We will be using the Synchromesh gem</a></p>
<p>Reactive Record is the data layer between one client and its server and Synchromesh uses push notifications to push changed records to all connected Reactive Record clients.</p>
<p>Synchromesh is incredibly simple to setup. Add this line to your Gemfile:</p>
<pre><code class="ruby">gem 'synchromesh', git: &quot;https://github.com/reactrb/synchromesh.git&quot;
</code></pre>

<p>And then execute:</p>
<pre><code class="text">$ bundle install
</code></pre>

<p>Next add this line to your <code>components.rb</code>:</p>
<pre><code class="ruby">require 'synchromesh'
</code></pre>

<p>Finally, you need to add an initialiser <code>config/initializers/synchromesh.rb</code></p>
<pre><code class="ruby"># config/initializers/synchromesh.rb
Synchromesh.configuration do |config|
  # this is the initialiser for polling, see the synchromesh
  # documentation for using pusher.com
  config.transport = :simple_poller
  config.channel_prefix = &quot;synchromesh&quot;
  config.opts = {
    seconds_between_poll: 1.second,
    seconds_polled_data_will_be_retained: 1.hour
  }
end
</code></pre>

<p>Restart your server, open two browser windows and be amazed to see any new posts added to one session magically appearing in the other!</p>
<p>Todo:<br />
+ Reactrb Router</p>
<h2 id="reactrb-hot-reloader-and-opal-irb"><a name="user-content-reactrb-hot-reloader-and-opal-irb" href="#reactrb-hot-reloader-and-opal-irb" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Reactrb Hot-reloader and Opal IRB</h2>
<p>Before we go any further, let&rsquo;s install too fantastic tools written by Forrest Chang:</p>
<ul>
<li><a href="https://github.com/fkchang/opal-hot-reloader">Opal Hot Reloader</a></li>
<li><a href="https://github.com/fkchang/opal-console">Opal Console</a></li>
</ul>
<p>Opal Hot Loader is for pure programmer joy (not having to reload the page to compile your source) and the Opal console is incredibly useful to test how Ruby code compiles to JavaScript.</p>
<p>We are also going to add the Foreman gem to run our Rails server and the Hot Loader service for us.</p>
<p>Add the following lines to your <code>gemfile</code> and run <code>bundle</code>:</p>
<pre><code class="ruby">gem 'opal_hot_reloader', git: 'https://github.com/fkchang/opal-hot-reloader.git'
gem 'foreman'
</code></pre>

<p><code>bundle install</code></p>
<p>Modify your <code>components.rb</code>, adding the following lines inside the if statement so they only run on the client and not as part of the server pre-rendering process:</p>
<pre><code class="ruby">require 'opal_hot_reloader'
OpalHotReloader.listen(25222, true)
</code></pre>

<p>Then modify your <code>procfile</code> so that the Hot Loader service will start whenever you start your server:</p>
<pre><code class="text">rails: bundle exec rails server
hotloader: opal-hot-reloader -p 25222 -d app/views/components
</code></pre>

<p>To start both servers:</p>
<p><code>foreman start</code></p>
<p>Refresh your browser for the last time and try modifying your <code>show.rb</code> component and you should see your changes appearing magically in your browser as you save. Pure joy.  </p>
<h2 id="further-reading"><a name="user-content-further-reading" href="#further-reading" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Further reading</h2>
<h3 id="other-reactrb-tutorials-and-examples"><a name="user-content-other-reactrb-tutorials-and-examples" href="#other-reactrb-tutorials-and-examples" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Other Reactrb tutorials and examples</h3>
<ul>
<li><a href="https://github.com/loicboutet/reactrb_tutorial">Getting started with Reactrb and Rails</a></li>
<li><a href="https://github.com/reactrb/reactrb.github.io/blob/master/docs/tutorial.md">ChatRB Demo App</a></li>
<li><a href="https://github.com/loicboutet/reactivetodo">Reactive Record sample ToDo app</a></li>
<li><a href="https://github.com/reactrb/reactrb.github.io/wiki/Sending-data-from-deeply-nested-components">Flux pattern in Reactrb</a></li>
<li><a href="https://github.com/fkchang/getting-started-reactrb-webpack">Getting with Reactrb, React Bootstrap and Webpack</a></li>
</ul>
<h3 id="other-reactrb-resources"><a name="user-content-other-reactrb-resources" href="#other-reactrb-resources" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Other Reactrb resources</h3>
<ul>
<li><a href="http://reactrb.org/">Reactrb website</a></li>
<li><a href="https://github.com/reactrb/reactrb">Reactrb GitHub site</a></li>
</ul>
<h3 id="reactrb-is-powered-by-react"><a name="user-content-reactrb-is-powered-by-react" href="#reactrb-is-powered-by-react" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Reactrb is powered by React</h3>
<p>Reactrb and friends are in most cases simple DSL Ruby wrappers to the underlying native JavaScript libraries and React Components. It is really important to have a solid grip on how these technologies work to complement your understanding of Reactrb. Most searches for help on Google will take you to examples written in JSX or ES6 JavaScript but you will learn over time to transalte this to Reactrb equivalents. To make headway with Reactrb you do need a solid understanding of the underlying philosophy of React and its component based architecture. The &lsquo;Thinking in React&rsquo; tutorial below is an excellent place to start. (Make sure you see the Flux pattern in Reactrb above for an example of how to communicate between grandparent and child components).   </p>
<ul>
<li><a href="https://facebook.github.io/react/docs/thinking-in-react.html">Thinking in React</a></li>
<li><a href="https://facebook.github.io/react/docs/getting-started.html">React</a></li>
<li><a href="https://github.com/reactjs/react-router">React Router</a></li>
<li><a href="https://react-bootstrap.github.io/">React Bootstrap</a></li>
</ul>
<h3 id="opal-under-the-covers"><a name="user-content-opal-under-the-covers" href="#opal-under-the-covers" class="headeranchor-link" aria-hidden="true"><span class="headeranchor"></span></a>Opal under the covers</h3>
<p>Reactrb is a DSL wrapper of React which uses Opal to compile Ruby code to ES5 native JavaScript. If you have not used Opal before then you should at a minimum read the excellent guides as they will teach you enough to get you started with Reactrb.</p>
<ul>
<li><a href="http://opalrb.org/">Opal</a></li>
<li><a href="http://opalrb.org/docs/guides/v0.9.2/index.html">Opal Guides</a></li>
<li><a href="https://www.youtube.com/watch?v=vhIrrlcWphU">To see the full power of Opal in action watch this video</a></li>
</ul></article></body></html>